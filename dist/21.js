webpackJsonp([21],{274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(315),r=n(384),l=n(65),i=l(a.a,r.a,!1,null,null,null);t.default=i.exports},300:function(e,t,n){"use strict";var a=n(39),r=n.n(a),l=n(38),i=n.n(l),c=n(40),s=n.n(c),o=n(116),u=n.n(o),h=n(41),f=n.n(h),p=n(42),d=n.n(p),v=n(118),g=n.n(v),m=n(117),b=n.n(m),w=n(115),x=function(e){function t(){return f()(this,t),g()(this,(t.__proto__||u()(t)).apply(this,arguments))}return b()(t,e),d()(t,[{key:"getChallengeView",value:function(){var e=this;return new s.a(function(){var t=i()(r.a.mark(function t(n,a){var l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.request("GET","/challenge/ChallengeView",null,{needAuth:!0});case 3:l=t.sent,n(l),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"SubmitFlag",value:function(e,t){var n=this;return new s.a(function(){var a=i()(r.a.mark(function a(l,i){var c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n.request("POST","/challenge/SubmitFlag",{qid:e,flag:t},{needAuth:!0});case 3:c=a.sent,l(c),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),i(a.t0);case 10:case"end":return a.stop()}},a,n,[[0,7]])}));return function(e,t){return a.apply(this,arguments)}}())}},{key:"getSolvedChallenges",value:function(){var e=this;return new s.a(function(){var t=i()(r.a.mark(function t(n,a){var l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.request("GET","/user/getSolvedChallenges",null,{needAuth:!0});case 3:l=t.sent,n(l),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"CreateChallenge",value:function(e,t,n,a,l,c){var o=this;return new s.a(function(){var s=i()(r.a.mark(function i(s,u){var h;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.request("POST","/challenge/create",{title:e,description:t,url:n,category_id:a,score:c,flag:l},{needAuth:!0});case 3:h=r.sent,s(h),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),u(r.t0);case 10:case"end":return r.stop()}},i,o,[[0,7]])}));return function(e,t){return s.apply(this,arguments)}}())}},{key:"getSolvedUsers",value:function(e){var t=this;return new s.a(function(){var n=i()(r.a.mark(function n(a,l){var i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.request("GET","/challenge/solvedUsers",{qid:e},{needAuth:!0});case 3:i=n.sent,a(i),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),l(n.t0);case 10:case"end":return n.stop()}},n,t,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"delChallenge",value:function(e){var t=this;return new s.a(function(){var n=i()(r.a.mark(function n(a,l){var i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.request("POST","/challenge/DeleteChallenge",{qid:e},{needAuth:!0});case 3:i=n.sent,a(i),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),l(n.t0);case 10:case"end":return n.stop()}},n,t,[[0,7]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"UpdateChallenge",value:function(e,t,n,a,l,c){var o=this;return new s.a(function(){var s=i()(r.a.mark(function i(s,u){var h;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.request("POST","/challenge/UpdateChallenge",{qid:e,title:t,description:n,url:a,score:c,flag:l},{needAuth:!0});case 3:h=r.sent,s(h),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),u(r.t0);case 10:case"end":return r.stop()}},i,o,[[0,7]])}));return function(e,t){return s.apply(this,arguments)}}())}}]),t}(w.a);t.a=new x},315:function(e,t,n){"use strict";var a=n(39),r=n.n(a),l=n(38),i=n.n(l),c=n(300);t.a={data:function(){return{category:"",result:"",activeTab:"",tableData:[],ChallengeFormVisible:!1,challengeform:{title:"",flag:"",description:"",url:"",index:""},formLabelWidth:"80px",labelPosition:"right",challenge_id:"",loading:!1}},methods:{LoadChallengeView:function(){function e(){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,c.a.getChallengeView();case 4:t=e.sent,this.result=t.data.data,this.activeTab=this.result[0].category_name,this.loading=!1,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return e}(),handleClick:function(e,t){console.log(e,t)},deleteRow:function(){function e(e,n){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.delChallenge(n[t].qid);case 3:a=e.sent,this.$message.success(a.data.msg),n.splice(t,1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.$handleError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return e}(),confirm:function(e,t){var n=this;this.$confirm("确认删除 "+t[e].title+" ?").then(function(a){n.deleteRow(e,t)}).catch(function(e){})},edit:function(e,t){this.ChallengeFormVisible=!0,this.challengeform.title=t[e].title,this.challengeform.url=t[e].url,this.challengeform.flag=t[e].flag,this.challengeform.description=t[e].description,this.challengeform.score=t[e].score,this.challenge_id=t[e].qid,this.challengeform.index=e},updatechallenge:function(){function e(e,n){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.UpdateChallenge(t,this.challengeform.title,this.challengeform.description,this.challengeform.url,this.challengeform.flag,this.challengeform.score);case 3:a=e.sent,this.$message.success("更改题目成功"),this.ChallengeFormVisible=!1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.$handleError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return e}()},mounted:function(){this.LoadChallengeView()}}},384:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("题目列表")])]),e._v(" "),n("el-alert",{attrs:{title:"修改后题目列表需要刷新",type:"warning","show-icon":""}}),e._v(" "),n("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._l(e.result,function(t,a){return[n("el-tab-pane",{key:t.category_id,attrs:{label:t.category_name,name:t.category_name}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.challenges,border:""}},[n("el-table-column",{attrs:{prop:"qid",label:"题目编号",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"题目名称",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"url",label:"url",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"description",label:"说明",width:"300"}}),e._v(" "),n("el-table-column",{attrs:{prop:"flag",label:"flag",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"score",label:"分数",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"updated_at",label:"更新时间",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.confirm(t.$index,e.result[a].challenges)}}},[e._v("删除\n                        ")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.edit(t.$index,e.result[a].challenges)}}},[e._v("编辑\n                        ")])]}}],null,!0)})],1)],1)]})],2),e._v(" "),n("el-dialog",{attrs:{title:"编辑题目",visible:e.ChallengeFormVisible},on:{"update:visible":function(t){e.ChallengeFormVisible=t}}},[n("el-form",{attrs:{"label-position":e.labelPosition,model:e.challengeform}},[n("el-form-item",{attrs:{label:"题目名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.challengeform.title,callback:function(t){e.$set(e.challengeform,"title",t)},expression:"challengeform.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"题目描述","label-width":e.formLabelWidth}},[n("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.challengeform.description,callback:function(t){e.$set(e.challengeform,"description",t)},expression:"challengeform.description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"题目链接","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.challengeform.url,callback:function(t){e.$set(e.challengeform,"url",t)},expression:"challengeform.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"flag","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.challengeform.flag,callback:function(t){e.$set(e.challengeform,"flag",t)},expression:"challengeform.flag"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"分数","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.challengeform.score,callback:function(t){e.$set(e.challengeform,"score",t)},expression:"challengeform.score"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.ChallengeFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updatechallenge(e.challenge_id,e.challengeform.index)}}},[e._v("确 定")])],1)],1)],1)],1)},r=[],l={render:a,staticRenderFns:r};t.a=l}});
//# sourceMappingURL=21.js.map?d343b2ce851f2337cf2d